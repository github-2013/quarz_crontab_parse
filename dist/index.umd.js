!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?module.exports=n():"function"==typeof define&&define.amd?define(n):(e="undefined"!=typeof globalThis?globalThis:e||self).parseCrontab=n()}(this,(function(){"use strict";const e=24,n=60,s={"1,SUN":{nameCn:"星期天",nameEn:"Sunday"},"2,MON":{nameCn:"星期一",nameEn:"Monday"},"3,TUE":{nameCn:"星期二",nameEn:"Tuesday"},"4,WED":{nameCn:"星期三",nameEn:"Wednesday"},"5,THU":{nameCn:"星期四",nameEn:"Thursday"},"6,FRI":{nameCn:"星期五",nameEn:"Friday"},"7,SAT":{nameCn:"星期六",nameEn:"Saturday"}};function i(e){const n=parseInt(e);if(n<0||n>7)throw new Error("crontab表达式有误，dayOfWeek数字应为1-7");return function(e,n=!0){const i=Object.entries(s);for(let s=0;s<i.length;s++){const[t,l]=i[s];if(t.includes(e))return n?l.nameCn:l.nameEn}}(e)}function t(e,n,s,i){let t="";const l=e.split("/"),$=l[0],f=l[1],c=`${n+parseInt($)-parseInt(f)}`,o=i[s];let u=i[s];return 1==s?u="分钟":2==s&&(u="小时"),t+=`从${$}${o}开始到${c}${o}范围内,每隔${f}${u}`,t}return function(s){return function(s,l){if(null===s||s.trim().length<1)throw new Error("cron表达式为空");const $=s.trim().split(" ");let f="";if(6===$.length||7===$.length){if(7===$.length){const e=$[6];if("*"!==e&&"?"!==e)if(e.includes("-")){const n=e.split("-");f+=`${n[0]}年到${n[1]}年`}else f+=`${e}${l[6]}`}const s=$[4];if("*"!==s&&"?"!==s)if(s.includes("/"))f+=`从${s.split("/")[0]}号开始",每${s.split("/")[1]}${l[4]}`;else{f.includes("-")&&(f+="每年");const e=s.split("-");f+=`${e[0]}月到${e[1]}月`}let c=$[5];if("*"!==c&&"?"!==c)if(c.includes(","))f+=`每周的第${c}${l[3]}`;else if(c.includes("L")&&c.length>1){f+="每月的最后一周的",f+=i(c.split("L")[0])}else if(c.includes("-")){const e=c.split("-");f+=`每周的${i(e[0])}到${i(e[1])}`}else{"L"===c&&(c="7"),f+="每周的";f+=i(c)}const o=$[3];if("?"!==o&&"*"!==o)if(o.includes("/"))f+=`每周从第${o.split("/")[0]}天开始,每${o.split("/")[1]}${l[3]}`;else if("L"===o)f+="每月最后一天";else if("W"===o)f+=o;else if(o.includes("#")){const e=o.split("#"),n=e[0],s=e[1],t=i(n);f+=`每月第${s}${l[5]}${t}`}else f+=`每月${o}号`;else 0!==f.length&&7!==$.length||f.includes("星期")||"?"!==o&&(f+=`每${l[3]}`);const u=$[2];if("*"!==u)if("?"===u);else if(u.includes("/"))f+=t(u,e,2,l);else if("0"!==u)if(u.includes("-")){const e=u.split("-"),n=e[0],s=e[1];f+=`${n}${l[2]}到${s}${l[2]}`}else f+=`每天${u}${l[2]}`;else f+=`${u}${l[2]}`;const d=$[1];if("*"!==d)if("?"===d);else if(d.includes("/"))f+=t(d,n,1,l);else if(d.includes("-")){const e=d.split("-");f+=`${e[0]}${l[1]}到${e[1]}${l[1]}每分钟`}else d.includes(",")?f+=`第${d}${l[1]}`:f+=`${d}${l[1]}`;const r=$[0];if("*"!==r)if(r.includes("/"))f+=t(r,n,0,l);else if("0"!==r)if(r.includes("-")){const e=r.split("-"),n=e[0],s=e[1];f+=`${n}${l[0]}到${s}${l[0]}`}else r.includes(",")?f+=`第${r}${l[0]}`:f+=`每${r}${l[0]}`;else 0===f.length&&(f+=`每${r}${l[0]}`);0===f.length&&(f="表达式转换异常")}return f}(s,["秒","分","时","天","月","周","年"])}}));
