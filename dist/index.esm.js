const e=24,n=60,s={"1,SUN":{nameCn:"星期天",nameEn:"Sunday"},"2,MON":{nameCn:"星期一",nameEn:"Monday"},"3,TUE":{nameCn:"星期二",nameEn:"Tuesday"},"4,WED":{nameCn:"星期三",nameEn:"Wednesday"},"5,THU":{nameCn:"星期四",nameEn:"Thursday"},"6,FRI":{nameCn:"星期五",nameEn:"Friday"},"7,SAT":{nameCn:"星期六",nameEn:"Saturday"}};function i(s){return function(s,i){if(null===s||s.trim().length<1)throw new Error("cron表达式为空");const $=s.trim().split(" ");let c="";if(6===$.length||7===$.length){if(7===$.length){const e=$[6];if("*"!==e&&"?"!==e)if(e.includes("-")){const n=e.split("-");c+=`${n[0]}年到${n[1]}年`}else c+=`${e}${i[6]}`}const s=$[4];if("*"!==s&&"?"!==s)if(s.includes("/"))c+=`从${s.split("/")[0]}号开始",每${s.split("/")[1]}${i[4]}`;else{c.includes("-")&&(c+="每年");const e=s.split("-");c+=`${e[0]}月到${e[1]}月`}let f=$[5];if("*"!==f&&"?"!==f)if(f.includes(","))c+=`每周的第${f}${i[3]}`;else if(f.includes("L")&&f.length>1){c+="每月的最后一周的",c+=t(f.split("L")[0])}else if(f.includes("-")){const e=f.split("-");c+=`每周的${t(e[0])}到${t(e[1])}`}else{"L"===f&&(f="7"),c+="每周的";c+=t(f)}const u=$[3];if("?"!==u&&"*"!==u)if(u.includes("/"))c+=`每周从第${u.split("/")[0]}天开始,每${u.split("/")[1]}${i[3]}`;else if("L"===u)c+="每月最后一天";else if("W"===u)c+=u;else if(u.includes("#")){const e=u.split("#"),n=e[0],s=e[1],l=t(n);c+=`每月第${s}${i[5]}${l}`}else c+=`每月${u}号`;else 0!==c.length&&7!==$.length||c.includes("星期")||"?"!==u&&(c+=`每${i[3]}`);const o=$[2];if("*"!==o)if("?"===o);else if(o.includes("/"))c+=l(o,e,2,i);else if("0"!==o)if(o.includes("-")){const e=o.split("-"),n=e[0],s=e[1];c+=`${n}${i[2]}到${s}${i[2]}`}else c+=`每天${o}${i[2]}`;else c+=`${o}${i[2]}`;const a=$[1];if("*"!==a)if("?"===a);else if(a.includes("/"))c+=l(a,n,1,i);else if(a.includes("-")){const e=a.split("-");c+=`${e[0]}${i[1]}到${e[1]}${i[1]}每分钟`}else a.includes(",")?c+=`第${a}${i[1]}`:c+=`${a}${i[1]}`;const r=$[0];if("*"!==r)if(r.includes("/"))c+=l(r,n,0,i);else if("0"!==r)if(r.includes("-")){const e=r.split("-"),n=e[0],s=e[1];c+=`${n}${i[0]}到${s}${i[0]}`}else r.includes(",")?c+=`第${r}${i[0]}`:c+=`每${r}${i[0]}`;else 0===c.length&&(c+=`每${r}${i[0]}`);0===c.length&&(c="表达式转换异常")}return c}(s,["秒","分","时","天","月","周","年"])}function t(e){const n=parseInt(e);if(n<0||n>7)throw new Error("crontab表达式有误，dayOfWeek数字应为1-7");return function(e,n=!0){const i=Object.entries(s);for(let s=0;s<i.length;s++){const[t,l]=i[s];if(t.includes(e))return n?l.nameCn:l.nameEn}}(e)}function l(e,n,s,i){let t="";const l=e.split("/"),$=l[0],c=l[1],f=`${n+parseInt($)-parseInt(c)}`,u=i[s];let o=i[s];return 1==s?o="分钟":2==s&&(o="小时"),t+=`从${$}${u}开始到${f}${u}范围内,每隔${c}${o}`,t}export{i as default};
